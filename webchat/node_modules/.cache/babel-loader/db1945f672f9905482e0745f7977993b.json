{"remainingRequest":"/Users/r.f.maalman/Projects/Learning/webchat/node_modules/babel-loader/lib/index.js!/Users/r.f.maalman/Projects/Learning/webchat/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/r.f.maalman/Projects/Learning/webchat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/r.f.maalman/Projects/Learning/webchat/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/r.f.maalman/Projects/Learning/webchat/src/App.vue","mtime":1558946728665},{"path":"/Users/r.f.maalman/Projects/Learning/webchat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/r.f.maalman/Projects/Learning/webchat/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/r.f.maalman/Projects/Learning/webchat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/r.f.maalman/Projects/Learning/webchat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from 'vue';\nimport Chat from \"./components/Chat.vue\";\nimport Users from \"./components/Users\";\nimport VueSocketIO from 'vue-socket.io';\nexport default {\n  name: 'app',\n  data: function data() {\n    return {\n      id: 0,\n      name: '',\n      color: ''\n    };\n  },\n  components: {\n    Chat: Chat,\n    Users: Users\n  },\n  sockets: {\n    connect: function connect() {\n      // Fired when the socket connects.\n      this.isConnected = true;\n    },\n    disconnect: function disconnect() {\n      this.isConnected = false;\n    }\n  },\n  methods: {\n    init: function init() {\n      if (!sessionStorage.getItem('name')) {\n        this.name = this.name;\n        sessionStorage.setItem('name', this.name);\n      } else {\n        this.name = sessionStorage.getItem('name');\n      }\n\n      var _this = this;\n\n      var video = this.$refs.video;\n      var canvas = this.$refs.canvas;\n\n      if (navigator.mediaDevices.getUserMedia) {\n        navigator.mediaDevices.getUserMedia({\n          video: true\n        }).then(function (stream) {\n          video.srcObject = stream;\n\n          video.onloadedmetadata = function () {\n            canvas.width = video.videoWidth;\n            canvas.height = video.videoHeight;\n            setInterval(function () {\n              canvas.getContext('2d').drawImage(video, 0, 0);\n\n              _this.$socket.emit('image', {\n                id: _this.name,\n                color: _this.color,\n                name: _this.name,\n                image: canvas.toDataURL('image/jpeg', 0.8)\n              });\n            }, 100);\n          };\n        }).catch(function (err0r) {\n          console.log(\"Something went wrong!\");\n        });\n      }\n    },\n    getRandomColor: function getRandomColor() {\n      var letters = '0123456789ABCDEF';\n      var color = '#';\n\n      for (var i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 16)];\n      }\n\n      return color;\n    },\n    setName: function setName(e) {\n      this.name = e.target.value;\n      this.color = this.getRandomColor();\n      this.init();\n    }\n  },\n  mounted: function mounted() {\n    if (sessionStorage.getItem('name')) {\n      this.name = sessionStorage.getItem('name');\n      this.color = this.getRandomColor();\n      this.init();\n    }\n  }\n};",{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA,OAAA,GAAA,MAAA,KAAA;AACA,OAAA,IAAA;AACA,OAAA,KAAA;AACA,OAAA,WAAA,MAAA,eAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,KADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,EAAA,EAAA,CADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,UAAA,EAAA;AACA,IAAA,IAAA,EAAA,IADA;AAEA,IAAA,KAAA,EAAA;AAFA,GATA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,KAJA;AAMA,IAAA,UANA,wBAMA;AACA,WAAA,WAAA,GAAA,KAAA;AACA;AARA,GAbA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,UAAA,CAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA,EAAA;AACA,aAAA,IAAA,GAAA,KAAA,IAAA;AACA,QAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,KAAA,IAAA;AACA,OAHA,MAGA;AACA,aAAA,IAAA,GAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA;AACA;;AAEA,UAAA,KAAA,GAAA,IAAA;;AACA,UAAA,KAAA,GAAA,KAAA,KAAA,CAAA,KAAA;AACA,UAAA,MAAA,GAAA,KAAA,KAAA,CAAA,MAAA;;AACA,UAAA,SAAA,CAAA,YAAA,CAAA,YAAA,EAAA;AACA,QAAA,SAAA,CAAA,YAAA,CAAA,YAAA,CAAA;AAAA,UAAA,KAAA,EAAA;AAAA,SAAA,EACA,IADA,CACA,UAAA,MAAA,EAAA;AACA,UAAA,KAAA,CAAA,SAAA,GAAA,MAAA;;AACA,UAAA,KAAA,CAAA,gBAAA,GAAA,YAAA;AACA,YAAA,MAAA,CAAA,KAAA,GAAA,KAAA,CAAA,UAAA;AACA,YAAA,MAAA,CAAA,MAAA,GAAA,KAAA,CAAA,WAAA;AACA,YAAA,WAAA,CAAA,YAAA;AACA,cAAA,MAAA,CAAA,UAAA,CAAA,IAAA,EAAA,SAAA,CAAA,KAAA,EAAA,CAAA,EAAA,CAAA;;AACA,cAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AAAA,gBAAA,EAAA,EAAA,KAAA,CAAA,IAAA;AAAA,gBAAA,KAAA,EAAA,KAAA,CAAA,KAAA;AAAA,gBAAA,IAAA,EAAA,KAAA,CAAA,IAAA;AAAA,gBAAA,KAAA,EAAA,MAAA,CAAA,SAAA,CAAA,YAAA,EAAA,GAAA;AAAA,eAAA;AACA,aAHA,EAGA,GAHA,CAAA;AAIA,WAPA;AASA,SAZA,EAaA,KAbA,CAaA,UAAA,KAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,uBAAA;AACA,SAfA;AAgBA;AACA,KA9BA;AAgCA,IAAA,cAhCA,4BAgCA;AACA,UAAA,OAAA,GAAA,kBAAA;AACA,UAAA,KAAA,GAAA,GAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,CAAA,EAAA,CAAA,EAAA,EAAA;AACA,QAAA,KAAA,IAAA,OAAA,CAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,MAAA,KAAA,EAAA,CAAA,CAAA;AACA;;AACA,aAAA,KAAA;AACA,KAvCA;AAyCA,IAAA,OAzCA,mBAyCA,CAzCA,EAyCA;AACA,WAAA,IAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA;AACA,WAAA,KAAA,GAAA,KAAA,cAAA,EAAA;AACA,WAAA,IAAA;AACA;AA7CA,GAvBA;AAsEA,EAAA,OAtEA,qBAsEA;AACA,QAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA,EAAA;AACA,WAAA,IAAA,GAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA;AACA,WAAA,KAAA,GAAA,KAAA,cAAA,EAAA;AACA,WAAA,IAAA;AACA;AACA;AA5EA,CAAA","sourcesContent":["<template>\n  <div id=\"app\">\n    <section v-show=\"!name\">\n      <h1>What is your name?</h1>\n      <input type=\"text\" v-on:keyup.enter=\"setName($event)\">\n      <button @click=\"setName\">Enter</button>\n    </section>\n    <section v-show=\"name\">\n      <video ref=\"video\" autoplay=\"true\" style=\"display: none;\"></video>\n      <canvas ref=\"canvas\" style=\"display: none;\"></canvas>\n    \n      <div class=\"container grid-3-9\">\n        \n        <Chat :name=\"name\" />\n        <Users />\n      </div>  \n    </section>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport Chat from './components/Chat.vue';\nimport Users from './components/Users';\nimport VueSocketIO from 'vue-socket.io';\n\nexport default {\n  name: 'app',\n  data () {\n    return {\n      id: 0,\n      name: '',\n      color: ''\n    }\n  },\n  components: {\n    Chat,\n    Users\n  },\n  sockets: {\n    connect() {\n      // Fired when the socket connects.\n      this.isConnected = true;\n    },\n\n    disconnect() {\n      this.isConnected = false;\n    }\n  },\n  methods: {\n    init () {\n      if(!sessionStorage.getItem('name')) {\n        this.name = this.name;\n        sessionStorage.setItem('name', this.name);\n      } else {\n        this.name = sessionStorage.getItem('name');\n      }\n\n      let _this = this;\n      let video = this.$refs.video;\n      let canvas = this.$refs.canvas;\n      if (navigator.mediaDevices.getUserMedia) {\n        navigator.mediaDevices.getUserMedia({ video: true })\n          .then(function (stream) {\n            video.srcObject = stream;\n            video.onloadedmetadata = function () {\n              canvas.width = video.videoWidth;\n              canvas.height = video.videoHeight;\n              setInterval(() => {\n                canvas.getContext('2d').drawImage(video, 0, 0);\n                _this.$socket.emit('image', {id: _this.name, color: _this.color, name: _this.name, image: canvas.toDataURL('image/jpeg', 0.8)});\n              }, 100);\n            };\n            \n          })\n          .catch(function (err0r) {\n            console.log(\"Something went wrong!\");\n          });\n      }\n    },\n\n    getRandomColor() {\n      var letters = '0123456789ABCDEF';\n      var color = '#';\n      for (var i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 16)];\n      }\n      return color;\n    },\n\n    setName (e) {\n      this.name = e.target.value;\n      this.color = this.getRandomColor();\n      this.init();\n    }\n  },\n  mounted () {\n    if(sessionStorage.getItem('name')) {\n      this.name = sessionStorage.getItem('name');\n      this.color = this.getRandomColor();\n      this.init();\n    }\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n}\n\nbody {\n  margin: 0;\n}\n\n.grid-3-9 {\n  display: grid;\n  grid-template-columns: 1fr 4fr;\n  gap: 30px;\n}\n\nvideo {\n  width: 200px;\n}\n\n</style>\n"],"sourceRoot":"src"}]}